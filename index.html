<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Kanji Search</title>
</head>
<body>
  <h1>Kanji Search</h1>
  <input id="filter" type="number" placeholder="Enter stroke count" />
  <table id="results" border="1"></table>

  <script type="module">
    import init, { search_by_strokes } from "./pkg/wasm_kanji_search.js";

    async function run() {
      await init();
      const input = document.getElementById("strokes");
      const table = document.getElementById("results");

      input.addEventListener("input", () => {
        table.innerHTML = "";
        const value = parseInt(input.value);
        if (!isNaN(value)) {
          const results = search_by_strokes(value);
          console.log("Stroke count:", value, "Results:", results);
          results.forEach(k => {
            const row = document.createElement("tr");
            row.innerHTML = `
              <td>${k.character}</td>
              <td>${k.on_readings.join(", ")}</td>
              <td>${k.kun_readings.join(", ")}</td>
            `;
            table.appendChild(row);
          });
        }
      });
    }

    run();
  </script>
</body>
</html>
